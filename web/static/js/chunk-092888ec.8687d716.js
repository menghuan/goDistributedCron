(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-092888ec"],{"64f5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{type:"flex",justify:"end"}},[n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"info"},on:{click:e.refresh}},[e._v("刷新")])],1)],1),e._v(" "),n("br"),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logsLoading,expression:"logsLoading"}],attrs:{data:e.logs,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"任务名称",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"shell命令",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.command))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"cron表达式",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cronExpr)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"任务操作",width:"430",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-row",[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.editJob(t.row.name)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.deleteJob(t.row.name)}}},[e._v("删除")])],1),e._v(" "),n("br"),e._v(" "),n("el-row",[n("el-button",{attrs:{type:"success"},on:{click:function(n){return e.runJob(t.row.name)}}},[e._v("手动执行")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.killJob(t.row.name)}}},[e._v("强杀")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:function(n){return e.jumpToLog(t.row.name)}}},[e._v("查看日志")])],1)]}}])})],1)],1)},r=[],o=n("76fe"),s={data:function(){return{logs:[],logsTotal:0,isAdmin:this.$store.getters.user.isAdmin,searchParams:{page_size:200,page:1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o["a"].list(this.searchParams,function(n){e.jobs=n.data,t&&t()})},refresh:function(){var e=this;this.fetchData(function(){e.$message.success("刷新日志成功")})}}},l=s,i=n("2877"),c=Object(i["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},"76fe":function(e,t,n){"use strict";var a=n("d81d"),r=n("83d6"),o=n.n(r);t["a"]={list:function(e,t){a["a"].post(o.a.serviceUrl+"/job/list",e,t)},save:function(e,t){a["a"].post(o.a.serviceUrl+"/job/save",e,t)},delete:function(e,t){a["a"].post(o.a.serviceUrl+"/job/delete",{name:e},t)},kill:function(e,t){a["a"].post(o.a.serviceUrl+"/job/kill",{name:e},t)},enable:function(e,t){a["a"].post(o.a.serviceUrl+"/job/enable",{name:e},t)},disable:function(e,t){a["a"].post(o.a.serviceUrl+"/job/disable",{name:e},t)},run:function(e,t){a["a"].post(o.a.serviceUrl+"/job/run",{name:e},t)},log:function(e,t){a["a"].get("/job/log",e,t)}}},d81d:function(e,t,n){"use strict";n("ac4d"),n("8a81"),n("ac6a");var a=n("bc3a"),r=n.n(a),o=n("5c96"),s=n("a18c"),l="加载失败, 请稍后再试",i=0,c=401,u=801;function f(e,t){e.then(function(e){return p(e,t)}).catch(function(e){return v(e)})}function d(e,t){switch(e){case u:return s["a"].push("/install"),!1;case c:return s["a"].push("/user/login"),!1}return e===i||(o["Message"].error({message:t}),!1)}function p(e,t){d(e.data.code,e.data.message)&&t&&t(e.data.data,e.data.code,e.data.message)}function v(e){o["Message"].error({message:"请求失败 - "+e})}r.a.defaults.baseURL="",r.a.defaults.timeout=1e4,r.a.defaults.responseType="json",r.a.interceptors.response.use(function(e){return e},function(e){return o["Message"].error({message:l}),Promise.reject(e)}),t["a"]={get:function(e,t,n){var a=r.a.get(e,{params:t});f(a,n)},batchGet:function(e,t){var n=[],a=!0,o=!1,s=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var c=l.value,u={};void 0!==c.params&&(u=c.params),n.push(r.a.get(c.uri,{params:u}))}}catch(f){o=!0,s=f}finally{try{a||null==i.return||i.return()}finally{if(o)throw s}}r.a.all(n).then(r.a.spread(function(){for(var e=[],n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var o=0,s=a;o<s.length;o++){var l=s[o];if(!d(l.data.code,l.data.message))return;e.push(l.data.data)}t.apply(void 0,e)})).catch(function(e){return v(e)})},post:function(e,t,n){var a=r.a.post(e,JSON.stringify(t),{headers:{post:{"Content-Type":"application/json"}}});f(a,n)}}}}]);